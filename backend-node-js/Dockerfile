# Base Image ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
FROM node:18.16.0-alpine AS build

COPY . ./backend-node-js
WORKDIR /backend-node-js

ARG PORT
ARG HOST_URL
ARG HOST
ARG SQL_SERVER
ARG SQL_PORT
ARG SQL_USER
ARG SQL_PWD
ARG SQL_DB
ARG SQL_ENCRYPT
ARG USER_POOL_ID
ARG CLIENT_ID

ENV PORT=$PORT
ENV HOST_URL=$HOST_URL
ENV HOST=$HOST
ENV SQL_SERVER=$SQL_SERVER
ENV SQL_PORT=$SQL_PORT
ENV SQL_USER=$SQL_USER
ENV SQL_PWD=$SQL_PWD
ENV SQL_DB=$SQL_DB
ENV SQL_ENCRYPT=$SQL_ENCRYPT
ENV USER_POOL_ID=$USER_POOL_ID
ENV CLIENT_ID=$CLIENT_ID


RUN yarn install

EXPOSE ${PORT}

CMD [ "yarn","start" ]


